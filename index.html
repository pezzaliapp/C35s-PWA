<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Ponte 2 Colonne ‚Äî C3.5S (PWA v4)</title>
  <meta name="theme-color" content="#0f172a">
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./icons/icon-192.png">
  <style>
    :root{ --bg:#0b1022; --card:#111735; --ink:#f1f4ff; --muted:#9fb0d9; --line:#1d2a55; --focus:#2dd4bf; --warn:#f59e0b; --good:#22c55e; }
    *{box-sizing:border-box}
    body{ margin:0; font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--ink); background:radial-gradient(1200px 600px at 20% -10%,#12204b 0%,transparent 60%) , #0b1022; }
    header{display:flex;gap:12px;align-items:center;padding:14px 16px;border-bottom:1px solid var(--line);position:sticky;top:0;background:#0b1022d0;backdrop-filter: blur(8px)}
    header h1{font-size:16px;margin:0}
    main{max-width:1200px;margin:0 auto;padding:16px;display:grid;grid-template-columns:1fr 380px;gap:16px}
    .card{background:linear-gradient(180deg,#111735 0%,#0f1733 100%);border:1px solid var(--line);border-radius:14px;padding:16px}
    h2{margin:0 0 10px 0;font-size:18px}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:4px}
    input,select,button{ width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--line); background:#0c1330;color:var(--ink);outline:none;}
    input:focus,select:focus{border-color:var(--focus);box-shadow:0 0 0 3px #2dd4bf22}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .muted{color:var(--muted);font-size:13px}
    .pill{padding:6px 10px;border:1px solid var(--line);border-radius:999px;font-size:12px;background:#0c1330;margin-right:8px}
    .actions{display:flex;gap:10px;margin-top:12px}
    pre{white-space:pre-wrap}
    canvas{width:100%;height:360px;background:#0c1330;border-radius:12px;border:1px solid var(--line)}
    @media (max-width:1000px){main{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <img src="./icons/icon-192.png" alt="icon" width="28" height="28">
    <h1>Ponte 2 Colonne ‚Äî C3.5S (3.5 t) ‚Ä¢ v4</h1>
    <span class="muted">PWA offline ‚Ä¢ ricerca modelli CASCOS + autocompilazione</span>
  </header>

  <main>
    <section class="card">
      <h2>Verifiche rapide</h2>

      <div class="row">
        <div>
          <label>Modello CASCOS (ricerca: modello/codice/categoria)</label>
          <input id="liftSearch" type="text" placeholder="Es: C3.5s, 13169, C4, EVO IIIR...">
        </div>
        <div>
          <label>Seleziona</label>
          <select id="liftSelect"></select>
        </div>
      </div>
      <div class="actions">
        <button id="applyLift">üîÅ Applica ai controlli</button>
        <button id="showLift">‚ÑπÔ∏è Dettagli modello</button>
      </div>
      <pre id="liftInfo" class="muted" style="margin:8px 0 12px"></pre>

      <div class="row">
        <div>
          <label>Massa veicolo (kg)</label>
          <input id="mass" type="number" min="500" max="4500" step="10" value="1800">
        </div>
        <div>
          <label>Altezza min punti presa (mm)</label>
          <input id="clearance" type="number" min="80" max="400" step="5" value="120">
        </div>
      </div>
      <div class="row" style="margin-top:10px">
        <div>
          <label>Altezza veicolo (tetto, mm)</label>
          <input id="vehHeight" type="number" min="1400" max="2500" step="10" value="1750">
        </div>
        <div>
          <label>Sollevamento desiderato (mm)</label>
          <input id="desiredLift" type="number" min="200" max="1970" step="10" value="1700">
        </div>
      </div>
      <div class="row" style="margin-top:10px">
        <div>
          <label>Spessore pavimento (mm)</label>
          <input id="slab" type="number" min="120" max="500" step="5" value="180">
        </div>
        <div>
          <label>Variante installazione</label>
          <select id="variant"><option>Senza basamento</option><option>Con basamento (trave/platea)</option></select>
        </div>
      </div>
      <div class="actions">
        <button id="runChecks">Esegui verifiche</button>
      </div>
      <pre id="out" class="muted"></pre>
    </section>

    <aside class="card">
      <h2>Dati ponte</h2>
      <div>
        <span class="pill">Portata <b id="cap">3500</b> kg</span>
        <span class="pill">H min 100 mm</span>
        <span class="pill">H max 1970 mm</span>
        <span class="pill">H sotto traversa 4248 mm</span>
        <span class="pill">Interasse 2700 mm</span>
        <span class="pill">Largh. tot 3350 mm</span>
        <span class="pill">Base 620 mm</span>
      </div>
      <h2 style="margin-top:14px">Viewer 3D (corsa+bracci)</h2>
      <div class="row">
        <div><label>Sollevamento (mm)</label><input id="hLift" type="range" min="0" max="1970" step="10" value="600"></div>
        <div><label>Estensione bracci (mm)</label><input id="armLen" type="range" min="690" max="1325" step="5" value="900"></div>
      </div>
      <div class="row" style="margin-top:10px">
        <div><label>Rotazione (¬∞)</label><input id="armRot" type="range" min="-35" max="35" step="1" value="20"></div>
        <div><label>Vista</label><select id="viewMode"><option value="iso">Isometrica</option><option value="front">Frontale</option><option value="top">Pianta</option></select></div>
      </div>
      <canvas id="iso3d" width="720" height="360"></canvas>
    </aside>
  </main>

  <script src="./app.js"></script>
</body>
</html>
